[2025-09-17T09:24:57.148Z] ERROR: Error in getAll() {"error":"DB error","stack":"Error: DB error\n    at Object.<anonymous> (C:\\projects\\Customer_Health_Score\\backend\\src\\tests\\mockApi.test.ts:28:53)\n    at Promise.finally.completed (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1496:10)\n    at _callCircusTest (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1917:21)\n    at jestAdapter (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"}
[2025-09-17T09:24:57.168Z] ERROR: Error in getById() {"id":1,"error":"DB error","stack":"Error: DB error\n    at Object.<anonymous> (C:\\projects\\Customer_Health_Score\\backend\\src\\tests\\mockApi.test.ts:46:53)\n    at Promise.finally.completed (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1496:10)\n    at _callCircusTest (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1917:21)\n    at jestAdapter (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"}
[2025-09-17T09:24:57.234Z] ERROR: Transaction rolled back {"customerId":1,"error":"Error saving customer events: Insert failed","stack":"Error: Error saving customer events: Insert failed\n    at Object.<anonymous> (C:\\projects\\Customer_Health_Score\\backend\\src\\tests\\mockApi.test.ts:88:58)\n    at C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-mock\\build\\index.js:305:39\n    at Object.<anonymous> (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-mock\\build\\index.js:312:13)\n    at Object.mockConstructor [as query] (C:\\projects\\Customer_Health_Score\\backend\\node_modules\\jest-mock\\build\\index.js:102:19)\n    at query (C:\\projects\\Customer_Health_Score\\backend\\src\\models\\customerModel.ts:247:18)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\projects\\Customer_Health_Score\\backend\\src\\tests\\mockApi.test.ts:91:9)"}
[2025-09-17T09:25:00.307Z] ERROR: Error in getCustomers {"error":"DB connection failed"}
[2025-09-17T09:25:00.309Z] ERROR: Error in getAllCustomers {"error":"Error fetching customers: DB connection failed"}
[2025-09-17T09:25:00.424Z] ERROR: Error in getCustomerHealth {"customerId":"1","error":"DB timeout"}
[2025-09-17T09:25:00.510Z] ERROR: Error recording customer event {"customerId":"1","error":"Insert failed"}
[2025-09-17T09:25:00.564Z] ERROR: Error in getCustomers {"error":"Dashboard service error"}
[2025-09-17T09:25:00.569Z] ERROR: Error in getAllCustomersWithHealth {"error":"Error fetching customers: Dashboard service error"}
[2025-09-17T09:25:00.607Z] ERROR: Error in getCustomers {"error":"DB connection failed"}
[2025-09-17T09:25:00.621Z] ERROR: Error in getAllCustomers {"error":"Error fetching customers: DB connection failed"}
[2025-09-17T09:25:00.676Z] ERROR: Error in getCustomers {"error":"weird error"}
[2025-09-17T09:25:00.680Z] ERROR: Error in getAllCustomers {"error":"Error fetching customers: weird error"}
[2025-09-17T09:25:00.697Z] ERROR: Error in getCustomers {"error":"Cannot read properties of null (reading 'forEach')"}
[2025-09-17T09:25:00.700Z] ERROR: Error in getAllCustomers {"error":"Error fetching customers: Cannot read properties of null (reading 'forEach')"}
